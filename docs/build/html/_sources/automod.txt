..  _automod:

############################
Claim "Automod" Details
############################

This is a supplement to the Use Case Document.
It provides detailed analysis and reverse engineering of legacy Automod
functionality.

Introduction
^^^^^^^^^^^^^^^^

There are two kinds of claim modification in Tiger:
    - automod of groups of claims,
    - manual modification of individual claims.

Automod is an ad-hoc collection of specialized modification algorithms, each
slightly different. Ideally the Automod algorithms and manual modification are
all part of a single, unified claim modification application.

This document provides detailed analysis of Automod in `Analysis`_.
The Unit Tests which define functionality are provided in `Unit Test Cases`_.
This document attempts to disentangle the various elements in `Unified Claim Modification`_.

Use Cases: :ref:`usecase`


Analysis
^^^^^^^^

Claim modification has two phases:  Automod and manual modification.

The essential Automod capabilities are rather complex.  Processing starts with
the Automod Form, described in `Automod Form`_.  We'll look at Automod with
Rules in `Automod Processing`_.

On the other hand, the manual modification of claims has a rich GUI interface,
but it very straight-forward.  It is a simple visual presentation of the elements
in the various loops and segments of an X12 message.  Additionally a simple
search capability allows a user to locate claims to change.  No further analysis
of manuam modification
is required.

Automod Form
============

Automod Processing begins with the Automod Form.  This form shows
a number of Automod parameters in a tabbed display.  The apply button initiates
the following processing steps.

1.  The form builds an ``AutomodCriteriaClaimSet`` object from a list of Claim objects.
    It does a copy of these claim objects.  *[Presumably a deep copy.]*

2.  The form then sets the automod values in the criteria object.
    The following table shows the assignments.

    +-------------+------------------------------------+-----------------------------+
    | Eligibility | SetDOBFromDate(dtFromDate)         | See below for the rules.    |
    |             | SetDOBToDate(dtToDate)             |                             |
    |             +------------------------------------+-----------------------------+
    |             | SetGroupID(Me.txtGrpID.Text)       |                             |
    |             +------------------------------------+-----------------------------+
    |             | SetProductID(Me.txtProdID.Text)    |                             |
    |             +------------------------------------+-----------------------------+
    |             | SetClassID(Me.txtClass.Text)       |                             |
    |             +------------------------------------+-----------------------------+
    |             | SetGender(strGender)               | Derived from All/Male/Female|
    |             |                                    | radio button group          |
    +-------------+------------------------------------+-----------------------------+
    | External    | SetExtPath(Me.txtExtFile.Text)     |                             |
    | Source      |                                    |                             |
    +-------------+------------------------------------+-----------------------------+
    | Patient     | SetPatientAccountPrefix(           |                             |
    | Account     | Me.cboPtAcctPrefix.SelectedIndex)  |                             |
    |             +------------------------------------+-----------------------------+
    |             | SetNPI(Me.chkNPI.Checked)          | This uses a modal dialog to |
    |             |                                    | get one more option:        |
    |             |                                    | "store the Legacy Provider  |
    |             |                                    | ID"                         |
    |             +------------------------------------+-----------------------------+
    |             | SetProviderID(Me.txtProv.Text)     |                             |
    |             +------------------------------------+-----------------------------+
    |             | SetDOS( *conversion of*            | Me.mtxtServiceDate != "/  /"|
    |             | Me.mtxtServiceDate.Text)           |                             |
    +             +------------------------------------+-----------------------------+
    |             |SetPatientAccount(Me.txtPtAcct.Text)|                             |
    +-------------+------------------------------------+-----------------------------+

    The DOBFromDate and DOBToDate are derived from the current date and the three
    relative age fields (``Age ==``, ``Age >=``, ``Age <=``).

        - If ``Age ==`` is filled in:
          a birth date range is computed
          from the current date: *m*/*d*/*y*-(*age*\ +1) to *m*/*d*/*y*-(*age*\ +1)+1

        - If both ``Age <=`` and ``Age >=`` are filled in:
          a birth date range is computed
          from the current date and the ``Age <=`` and ``Age >=`` values in the obvious way.

        - If ``Age >=`` is filled in:
          the lowest date is *m*/*d*/*y*-*age*, no highest date is used.

        - If ``Age <=`` is filled in:
          no lowest date is used, and the highest date is *m*/*d*/*y*-*age*.

#.  The form then uses an AutomodController object to apply the criteria set to the claims.
    Depending on fields supplied in the AutomodCriteriaClaimSet, this will do either
    rule modification or rule and document modification.

#.  Note that the patient account free text is not applied by the AutomodController.
    It is applied by the Edit form, as part of the final round of manual changes.
    *[There's no compelling reason for this.]*

#.  The list of groups in the current working set of claims is updated to show
    the groups and the claims changed within each group.

Automod Processing
==================

The Automod Controller's ``Apply`` method applies the Claim Criteria to a collection
of Claims.  If ``SetExtPath`` was not used, then automod rules are the only modifications.
Otherwise, if ``SetExtPath`` was used, a document is read to provide claim-level
and line-level detailed changes.

The ``Apply`` method has the following steps.

1.  Process "Eligibility" modification.  This associates eligible members
    with claims in the working set of claims.

    -   Validate the structure of the Claim Criteria object, for use in building
        the eligbility query.

        -   One of the following *must*
            be present: DOB low, DOB high, ClassID, GroupID, ProductID, Gender.
            If not, skip over eligibility processing.

        -   Either GroupID or ProductID (or both) *must* be present to select
            members by group, plan or both.  If neither are present, this is an error.

    -   Build the `Eligibility Query`_, filling in the various parameters to
        locate specific members within a group or plan.

    -   Apply the members retrieved by the eligbility
        query to the claims in the working set of claims, updating patient
        (if present in the original claim) and subscriber.

        If necessary, this will reuse the query results in order to modify all
        claims. This function will skip through the query result set looking for
        the next row which matches the claim criteria constraints of date of
        birth and gender.

2.  If DoS should be used (mtxtServiceDate was filled in), apply the Date of Service rules.

    -   The date provided by the user is the base date.
        Meaning that date should be applied to the last
        service on the claim and all other service dates should be calculated from this date.
        Users want the new dates to mirror the original date sequence.

        If there are two days between the Service Date of line 1 and line 2, there should be two days
        between the new dates for line 1 and line 2.

    -   There are a number of obscure special cases in the legacy code.
        Mostly related to making sure that claim-level ``837I`` and ``837O`` dates
        are set correctly with regard to the individual lines of the claim.

#.  If an external file name was provided, use this to update
    a number of attributes of a claim.  If necessary, this will reuse the
    file in order to modify all claims.

    At the Claim level, we have the following:

    -   Procedure Codes

    -   Provider (Billing/Rendering, Blue Cross/Blue Shield/Commercial)

    -   Diagnosis Codes

    -   Place of Service

    At the Line level, we have the following:

    -   Procedure Code

    -   Modifiers

#.  If the Patient Account Prefix was set, then each claim is updated with the
    selected prefix ("QUAL", "OCMA", "OCMB").

#.  If the Provider ID was given, then do the Provider Modifications.

    - If GetNPI is true: use the ApplyNPIProvider method.  This requires
      the `Provider Query`_, which is used to modify a number of fields within a message.

      The following segments must be examined to have NPI information inserted within
      both the Billing Provider and the Rendering Provider.

      - PRV

      - NM1

      - N3

      - N4

      - REF

    - Otherwise, GetNPI is false: use the ApplyNonNPIProvider method.
      This is similar to external processing.  It sets six fields,
      based on Billing/Rendering and Blue Cross/Blue Shield/Commercial.

#.  Add these modified claims to the working set of claims.  Eventually, these
    can be extracted for claim processing, saved as work-in-process or
    saved as a benchmark.

Eligibility Query
-----------------

The Eligibility Query locates Members, Subscribers and Groups::

    SELECT CMC_MEME_MEMBER.MEME_LAST_NAME, CMC_MEME_MEMBER.MEME_FIRST_NAME, CMC_MEME_MEMBER.MEME_MID_INIT,
    CMC_MEME_MEMBER.MEME_TITLE, CMC_MEME_MEMBER.MEME_BIRTH_DT, CMC_MEME_MEMBER.MEME_SEX,
    CMC_SBSB_SUBSC.SBSB_LAST_NAME, CMC_SBSB_SUBSC.SBSB_FIRST_NAME, CMC_SBSB_SUBSC.SBSB_ID, CMC_MEME_MEMBER.MEME_SFX,
    IT030_BENEFITS_TABLE.SUBR_CONT_NO_PFX_CD

    FROM CMC_MEME_MEMBER, CMC_GRGR_GROUP, CMC_SBSB_SUBSC, CMC_MEPE_PRCS_ELIG, CMC_CSPI_CS_PLAN, IT030_BENEFITS_TABLE

    WHERE CMC_MEPE_PRCS_ELIG.CSPD_CAT = 'M'
    AND CMC_MEPE_PRCS_ELIG.MEPE_EFF_DT < &Date.Today.ToString("d")
    AND CMC_MEPE_PRCS_ELIG.MEPE_TERM_DT > &Date.Today.ToString("d")
    AND CMC_MEME_MEMBER.GRGR_CK = CMC_GRGR_GROUP.GRGR_CK
    AND CMC_MEME_MEMBER.SBSB_CK = CMC_SBSB_SUBSC.SBSB_CK
    AND CMC_GRGR_GROUP.GRGR_CK = CMC_SBSB_SUBSC.GRGR_CK
    AND CMC_GRGR_GROUP.GRGR_CK = CMC_MEPE_PRCS_ELIG.GRGR_CK
    AND CMC_MEME_MEMBER.MEME_CK = CMC_MEPE_PRCS_ELIG.MEME_CK
    AND CMC_MEPE_PRCS_ELIG.PDPD_ID = CMC_CSPI_CS_PLAN.PDPD_ID
    AND CMC_MEPE_PRCS_ELIG.CSPI_ID = CMC_CSPI_CS_PLAN.CSPI_ID
    AND CMC_MEPE_PRCS_ELIG.CSPD_CAT = CMC_CSPI_CS_PLAN.CSPD_CAT
    AND CMC_MEPE_PRCS_ELIG.CSCS_ID = CMC_CSPI_CS_PLAN.CSCS_ID
    AND CMC_MEPE_PRCS_ELIG.GRGR_CK = CMC_CSPI_CS_PLAN.GRGR_CK
    AND CMC_MEPE_PRCS_ELIG.PDPD_ID = IT030_BENEFITS_TABLE.PRODUCT_ID
    AND CMC_SBSB_SUBSC.SBSB_MCTR_STS = 'ACTI'
    AND CMC_MEPE_PRCS_ELIG.MEPE_ELIG_IND = 'Y'

The following parameters are folded in to this query to locate a set of members.

+-----------------+--------------------------------------------------------+
|GetDOBFromDate() | ``AND CMC_MEME_MEMBER.MEME_BIRTH_DT >= &date``         |
+-----------------+--------------------------------------------------------+
|GetDOBToDate()   | ``AND CMC_MEME_MEMBER.MEME_BIRTH_DT <= &date``         |
+-----------------+--------------------------------------------------------+
|GetGender()      | ``AND CMC_MEME_MEMBER.MEME_SEX = &gender``             |
+-----------------+--------------------------------------------------------+
|GetGroupID()     | ``AND CMC_GRGR_GROUP.GRGR_ID = &groupID``              |
+-----------------+--------------------------------------------------------+
|GetProductID()   | ``AND CMC_CSPI_CS_PLAN.PDPD_ID = &productID``          |
+-----------------+--------------------------------------------------------+
|GetClassID()     | ``AND CMC_CSPI_CS_PLAN.CSCS_ID = &classID``            |
+-----------------+--------------------------------------------------------+

The following attributes are part of the result set.

====    ==========================================  =======================
Pos.    Member Query Result Set Columns             Content
====    ==========================================  =======================
0       CMC_MEME_MEMBER.MEME_LAST_NAME              Member
1       CMC_MEME_MEMBER.MEME_FIRST_NAME
2       CMC_MEME_MEMBER.MEME_MID_INIT
3       CMC_MEME_MEMBER.MEME_TITLE
4       CMC_MEME_MEMBER.MEME_BIRTH_DT
5       CMC_MEME_MEMBER.MEME_SEX
6       CMC_SBSB_SUBSC.SBSB_LAST_NAME               Subscriber
7       CMC_SBSB_SUBSC.SBSB_FIRST_NAME
8       CMC_SBSB_SUBSC.SBSB_ID                      Patient/Subscriber ID
9       CMC_MEME_MEMBER.MEME_SFX                    subscriber if 1 else member
10      IT030_BENEFITS_TABLE.SUBR_CONT_NO_PFX_CD
====    ==========================================  =======================

Provider Query
--------------

The Provider Query locates NPI providers::

        SELECT PRPR.PRPR_NAME, PRPR.MCTN_ID, PRPR.PRPR_NPI, PRPR.PRPR_TAXONOMY_CD, PRPR.PRPR_ID,
        PRCP.PRCP_LAST_NAME, PRCP.PRCP_FIRST_NAME, PRCP.PRCP_SSN, PRCP.PRCP_ID,
        PRAD.PRAD_ADDR1, PRAD.PRAD_ADDR2, PRAD.PRAD_CITY, PRAD.PRAD_STATE,
        PRAD.PRAD_ZIP, PRAD.PRAD_PHONE, PRAD.PRAD_PHONE_EXT, PRAD.PRAD_FAX,
        PRAD.PRAD_EMAIL, PRAD.PRAD_TYPE
        FROM (CMC_PRPR_PROV AS PRPR
        INNER JOIN CMC_PRAD_ADDRESS AS PRAD ON PRPR.PRAD_ID = PRAD.PRAD_ID)
        LEFT JOIN CMC_PRCP_COMM_PRAC AS PRCP ON PRPR.PRCP_ID = PRCP.PRCP_ID

Additional parameters are folded into the query::

        WHERE (PRPR.PRPR_ID = &m_CClaimSet.GetProviderID
        OR PRPR.PRCP_ID = &m_CClaimSet.GetProviderID )
        AND PRAD.PRAD_TYPE = 'P'"

The following attributes are part of the result set.

====    ==========================================
Pos.    NPI Provider Query Result Set Columns
====    ==========================================
0       PRPR.PRPR_NAME
1       PRPR.MCTN_ID
2       PRPR.PRPR_NPI
3       PRPR.PRPR_TAXONOMY_CD
4       PRPR.PRPR_ID
5       PRCP.PRCP_LAST_NAME
6       PRCP.PRCP_FIRST_NAME
7       PRCP.PRCP_SSN
8       PRCP.PRCP_ID
9       PRAD.PRAD_ADDR1
10      PRAD.PRAD_ADDR2
11      PRAD.PRAD_CITY
12      PRAD.PRAD_STATE
13      PRAD.PRAD_ZIP
14      PRAD.PRAD_PHONE
15      PRAD.PRAD_PHONE_EXT
16      PRAD.PRAD_FAX
17      PRAD.PRAD_EMAIL
18      PRAD.PRAD_TYPE
====    ==========================================

Legacy Automod Document
-----------------------

The Legacy Automod Document includes a number of attributes used to modify some
attributes of claims. Each row in the document is used to modify a claim or a
line-item within a claim. The rows from this document are simply used up in
order to modify claims. If there are more claims than rows, some claims will be
unmodified. If there are more rows than claims, those rows will not be used.

The legacy document does not completely cover Member information or provider
information.  The legacy application uses a query to locate members and
can use a query to locate providers.

The following attributes are present in the legacy autmod document.

:ICD9:
    Diagnosis Procedure Code (for Institutional Claims only).

:PROVIDER-#:
    Provider ID number to use

:DIAGNOSIS-CODE:
    Diagnosis Code.

:PLACE-OF-SERVICE:
    The place of service to put into the claim, and each line of the claim.

:HCPC-CPT:
    HCPC or CPT code

:CPT-MOD-1:
    CPT modifier.

:CPT-MOD-2:
    CPT modifier.

:CPT-MOD-3:
    CPT modifier.

:CPT-MOD-4:
    CPT modifier.

Unit Test Cases
^^^^^^^^^^^^^^^

Automod has a number of features that require unit test cases.  These fall
into two broad categories:

- `Legacy Unit Tests`.  These cases cover special cases in the legacy
  implementation.  It's easiest to start with these; a subset covers the
  generic features of automod.

- `Generic Unit Tests`.  These cases cover generic features.  This is a subset
  of the legacy test cases.

Legacy Unit Tests
=================

.. note:: Initially all unit tests are "legacy".
    Tests will be separated `Generic Unit Tests`_ and `Legacy Unit Tests`_
    as part of design activities in a later sprint.

Patient and Subscriber Modification
-----------------------------------

Member information is always a list, generally acquired via a SQL query.

1.  Matching Eligibility

    - Claims with constrained Gender and Age.
      Members with Genders and Ages in and out of claim's constraints.

    - Claims with constrained Gender only.
      Members with Genders in and out of claim's constraints.

    - Claims with constrained Age only.
      Members with Ages in and out of claim's constraints.

2.  Element Modifications

    - Claim has ``Patient.LastName``:

        - Set ``Patient.LastName`` and ``Patient.FirstName`` from Member.

        - If ``Patient.DOB``: it is modified.
          No ``Patient.DOB``: still has no DOB.

        - If ``Patient.Gender``: it is modified.
          No ``Patient.Gender``: still has no gender.

        - If ``Patient.ID``:
          ``Patient.ID`` is built from 3 fields: 10, 8 and field 9
          padded with a leading "0" if it has only one character
          (``IT030_BENEFITS_TABLE.SUBR_CONT_NO_PFX_CD || CMC_SBSB_SUBSC.SBSB_ID || CMC_MEME_MEMBER.MEME_SFX``)
          No ``Patient.ID``: still has no patient ID.

        - If ``Patient.MidInit``: middle initial modified.
          No ``Patient.MidInit``: still has no middle initial.

        - Set ``Subscriber.LastName`` and ``Subscriber.FirstName`` from Subscriber.

        - If ``Subscriber.DOB``: it is modified with subscriber DOB; the DOB on the Member with a suffix (column 9) of 1,
          and matching prefix and subscriber ID.
          No ``Subscriber.DOB``: still has no DOB.

        - If ``Subscriber.Gender``: it is modified with subscriber gender; the gender on the Member with a suffix (column 9) of 1,
          and matching prefix and subscriber ID.
          No ``Subscriber.Gender``: still has no gender.

        - If ``Subscriber.ID``:
          ``Subscriber.ID`` is built from 2 fields: 10 and 8
          (``IT030_BENEFITS_TABLE.SUBR_CONT_NO_PFX_CD || CMC_SBSB_SUBSC.SBSB_ID || '01'``)
          No ``Subscriber.ID``: still has no Subscriber ID.

    - Claim has no ``Patient.LastName``:

        - Set ``Subscriber.LastName`` and ``Subscriber.FirstName`` from Member.

        - If ``Subscriber.ID``:
          ``Subscriber.ID`` is built from 2 fields: 10 and 8
          (``IT030_BENEFITS_TABLE.SUBR_CONT_NO_PFX_CD || CMC_SBSB_SUBSC.SBSB_ID || '01'``)
          No ``Subscriber.ID``: still has no Subscriber ID.

        - If ``Subscriber.DOB``: it is modified with member DOB.
          No ``Subscriber.DOB``: still has no DOB.

        - If ``Subscriber.Gender``: it is modified with member gender.
          No ``Subscriber.Gender``: still has no gender.

#.  Member Reuse

    - Too few members that match constraints:
      Members will appear on more than one claim.

    - Too many members that match constraints:
      Members beyond the matching claims will not be used.

Provider (NPI) Modification
---------------------------

NPI Provider information is always a list, generally acquired via a SQL query.

Generally, segments in RenderingProvider and the BillingProvider loops
will get deleted if they are not modified or otherwise marked for preservation.

1.  Element Modifications: ``PRV`` segment

    Examine ``PRV`` segment in ``RenderingProvider`` or ``BillingProvider`` loops.

    -   If ``PRPR_TAXONOMY_CD`` is not ``NULL``:

        -   If Rendering loop does exist, and Taxonomy data exists, modify the Rendering
            ``PRV`` segment.
            Set ``RenderingProvider.TaxonomyCD`` to ``PRPR_TAXONOMY_CD``; SetPRV01("BI"); SetPRV02("ZZ").

        -   If Taxonomy exists at the Billing level, modify the Billing ``PRV`` segment.
            Set ``BillingProvider.TaxonomyCD`` to ``PRPR_TAXONOMY_CD``; SetPRV01("BI"); SetPRV02("ZZ").

        -   If no ``PRV`` segment exists at [neither] the Billing nor the Rendering loops,
            build [Rendering or Billing PRV segment].
            Rendering takes precedence if both loops are present.

            Rendering: AddPRVSegment("9999", "BI", "ZZ", strTaxonomy, "Ins," & (intRendNM1SeqNum + 1) )

            Billing: AddPRVSegment("9999", "BI", "ZZ", strTaxonomy, "Ins," & (intBillNM1SeqNum) )

    -   Otherwise, no changes.

#.  Element Modifications: ``NM1`` segment.

    If ``PRCP_LAST_NAME`` or ``PRCP_FIRST_NAME`` is ``NULL`` or spaces: ``NM102`` = "2"; else: ``NM102`` == "1".

    Billing NM102 is set.  If Rendering loop exists: Rendering NM102 is set.

    -   If NM102 == "2" (no PRCP name):  ``Billing.Last`` = ``PRPR_NAME``; ``Billing.First`` = "".
        If Rendering loop exists: ``Rendering.Last`` = ``PRPR_NAME``; ``Rendering.First`` = "".

    -   else NM102 == "1" (PRCP name):  ``Billing.Last`` = ``PRCP_LAST_NAME``; ``Billing.First`` = ``PRCP_FIRST_NAME``.
        If Rendering loop exists: ``Rendering.Last`` = ``PRCP_LAST_NAME``; ``Rendering.First`` = ``PRCP_FIRST_NAME``.

    -   If ``PRPR_NPI`` is ``NULL`` or spaces:
        ``Billing.NM108`` = "24"; ``Billing.NM109`` = ``MCTN_ID``.
        If Rendering loop exists: ``Rendering.NM108`` = "24"; ``Rendering.NM109`` = ``MCTN_ID``.

    -   else ``PRPR_NPI`` is not ``NULL`` and not spaces:
        ``Billing.NM108`` = "XX"; ``Billing.NM109`` = ``PRPR_NPI``.
        If Rendering loop exists: ``Rendering.NM108`` = "XX"; ``Rendering.NM109`` = ``PRPR_NPI``.

#.  Element Modifications:  ``N3`` Segment.

    ``BillingProvider.Address1`` set to ``PRAD.ADDR1`` (with ":"'s removed.)

    If ``PRAD_ADDR2`` is not ``NULL``: ``BillingProvider.Address2`` set to ``PRAD.ADDR2`` (with ":"'s removed.)

#.  Element Modifications: ``N4`` Segment.

    ``BillingProvider.City`` = ``PRAD_CITY``

    ``BillingProvider.State`` = ``PRAD_STATE``

    ``BillingProvider.Zip`` = ``PRAD_ZIP``

#.  Element Modifications: ``REF`` Segment.  Used to store the legacy ID, if present and selected by the
    automod operation.

    -   If saving legacy option:

        Set *intBillNM1SeqNum* to the sequence number of the ``NM1`` segment in the Billing loop.
        Set *intRendNM1SeqNum* to the sequence number of the ``NM1`` segment in the Rendering loop.

        BillingProvider.SetREF02("G2", ``PRPR_ID``, *intBillNM1SeqNum* + 3 )

        If Rendering loop exists:
        RenderingProvider.SetREF02("G2", ``PRPR_ID``, *intRendNM1SeqNum* + 1 )

    -   If ``PRPR_NPI`` is ``NULL`` or spaces (`Bug 1`_):

        BillingProvider.SetREF02("EI", ``MCTN_ID``, (*intBillNM1SeqNum* + 3) )

        If Rendering loop exists:
        RenderingProvider.SetREF02("EI", ``MCTN_ID``, (*intRendNM1SeqNum* + 1) )

    .. warning:: (_`Bug 1`) *Legacy lines 1968 to 1982.*

        The following test is badly formed::

            If Not IsDBNull(dtProv.Rows(0).Item("PRPR_NPI")) _
                     OrElse Not dtProv.Rows(0).Item("PRPR_NPI").ToString.Substring(0, 1).Equals(" ") Then

        ============    =============   =============   =============
        ``PRPR_NPI``    Not IsDBNull    Not is spaces   OrElse result
        ============    =============   =============   =============
        ``NULL``        False           True            True - use ``MCTN_ID``
        ``" "``         True            *not checked*   True - use ``MCTN_ID``
        *any other*     True            *not checked*   True - use ``MCTN_ID``
        ============    =============   =============   =============

#.  NPI Provider Reuse

    - Too few providers.
      Providers will appear on more than one claim.

    - Too many providers.
      Providers beyond the claims will not appear on any claim.

Date of Service Modification
----------------------------

Each LX loop has an optional DTP segment with the date.  There are two
formats: 'D8' and 'RD8'.  The 'D8' format is YYYYMMDD.  The 'RD8' format
is a from-to date range: YYYYMMDD-YYYYMMDD with an implied
time delta between the two dates.

*Other possible formats include 'DT' and 'TM'.*

Last date of service is the user's input.  Previous dates have an offset
from this last date.

1.  Element Modifications.  Applies to ``ProServiceLine.SrvDT`` or ``InstServiceLine.SrvDT``

    -   If no DTP segment: this LX is skipped with no modification.

    -   Last LX segment.

        -   Single date: set this date to user-provided DoS.

        -   Date range: set
            *to* date set to the user-provided DoS; the *from* date maintains the appropriate
            time delta from the *to* date.  `Bug 2`_

    .. warning:: (_`Bug 2`) *Legacy lines 874 to 902.*

        If the final LX loop has no DTP segment, the date processing on the
        next DTP segment will use the ``Nothing`` date of 1/1/0001.

    -   All previous LX segments.

        -   Single date: Compute this loop's time delta from the final LX date;
            set this date to user-provided DoS minus time delta.

        -   Date range:  Compute this loop's *to* date time delta from the final LX date;
            set *to* date to user-provided DoS minus time delta; the *from* date maintains the appropriate
            time delta from the *to* date.  *Legacy code, lines 917 to 941, is really obscure here.*

#.  Inpatient/Outpatient Element Modifications.

    -   ``InstClaimDetails.PrinProcDate`` is set to the user-provided DoS.

    -   ``InstClaimDetails.StatementDts`` can be omitted, an 8-character date or a
        17-character date range.  If omitted: no modification.  If single date: set to the user-provided DoS.
        If a date range: compute this loop's *to* date time delta from the
        final LX date; set *to* date to user-provided DoS minus time delta; the
        *from* date maintains the appropriate time delta from the *to* date.

    -   ``InstClaimDetails.AdmissionDt``.  This is a date and time and must match
        statement date.

        -   If ``InstClaimDetails.StatementDts`` is provided:
            set ``AdmissionDt`` to date from StatementDts and time from AdmissionDt.

        -   If ``InstClaimDetails.StatementDts`` not provided:
            set ``AdmissionDt`` to date from user-provided DoS and time from AdmissionDt.

        -   If ``PrinProcDate`` was provided: set to modified date from ``AdmissionDt``.

        -   If ``ProcDT1`` to ``ProcDT12`` were provided: set to modified date from ``AdmissionDt``.

Provider (Non-NPI) Modification
-------------------------------

Non-NPI Provider information is either a list of values or a single value.
If a list is provided, cycle through the list.  If a single value is provided,
use that single value on all claims.

1.  Element Modifications

    - If ``BillingProvider.BlueCrossID``: modify the provider id.

    - If ``BillingProvider.BlueShieldID``: modify the provider id.

    - If ``BillingProvider.CommercialID``: modify the provider id.

    - If ``RenderingProvider.BlueCrossID``: modify the provider id.

    - If ``RenderingProvider.BlueShieldID``: modify the provider id.

    - If ``RenderingProvider.CommercialID``: modify the provider id.

2.  Provider reuse is obscure:
    Procedure Code, Provider, Diagnosis Code, Place of Service are tied
    together.  The longest list determines the reuse loop.
    If provider is shorter, then some claims will not be modified.

Place of Service Modification
-----------------------------

1.  Element Modifications

    -   Institutional Claims.  ``InstClaimDetails.POS`` is modified.

    -   Professional Claims.  ``ProClaimDetails.POS`` is modified.  Each ``ProServiceLine.FacCode``
        is modified.

#.  Places of Service reused in an obscure way.
    Procedure Code, Provider, Diagnosis Code, Place of Service are tied
    together.  The longest list determines the reuse loop.
    If PoS is shorter, then some claims will not be modified.

Diagnosis Procedure Code (ICD9)
-------------------------------

1.  Element Modifications

    -   Institutional Claims.

        -   If ``InstClaimDetails.PrinProcCode`` was provided: modify with user-supplied procedure code.

        -   If ``InstClaimDetails.ProcCode1`` to ``ProcCode12`` was provided: modify with user-supplied procedure code.

    -   Professional Claims.   Not Modified.

#.  Procedure Codes reuse is obscure.
    Procedure Code, Provider, Diagnosis Code, Place of Service are tied
    together.  The longest list determines the reuse loop.
    If PC is shorter, then some claims will not be modified.

Diagnosis Code
--------------

1.  Element Modifications: Professional

    -   ``ProClaimDetails.DiagCode1`` set to user-supplied DC.

    -   For each service line: ``ProServiceLine.DiagCode1`` through ``DiagCode4`` all set to ``1``

#.  Element Modification: Institutional

    -   ``InstClaimDetails.AdmitDiagCd`` set to user-supplied DC.

    -   ``InstClaimDetails.PrinDiagCode`` set to user-supplied DC.

    -   ``InstClaimDetails.DiagCode1`` to ``DiagCode12`` set to user-supplied DC.

#.  Diagnosis Codes reuse is obscure.
    Procedure Code, Provider, Diagnosis Code, Place of Service are tied
    together.  The longest list determines the reuse loop.
    If DC is shorter, then some claims will not be modified.

Modifiers and HCPC-CPT
----------------------

1.  Professional Claims.  Each indiviudal service line is modified as follows.

    -   ``ProServiceLine.DMECode`` is set to the HCPC-CPT code.

    -   ``ProServiceLine.Mod1`` to ``Mod4`` are set to the user-supplied CPT-MOD-1 to CPT-MOD-4 values.

2.  Institutional Claims.  Each individual service line is modified as follows.

    -   ``InstServiceLine.ProcID`` is set to the HCPC-CPT code.

    -   ``InstServiceLine.Mod1`` to ``Mod4`` are set to the user-supplied CPT-MOD-1 to CPT-MOD-4 values.

Account Number Free Text
------------------------

Set ``BenID`` to the user-provided input.

Account Number Prefix
---------------------

-   Professional:
    Set ``ProClaimDetails.PatientAccount`` to prefix (padded to 4 positions) || free text padded to 10 positions || claim number in this working set

-   Institutional:
    Set ``InstClaimDetails.PatientAccount`` to prefix || text || claim number.

*In the legacy code, this is not part of the AutomodController class.
This is lines 3293 to 3319 of frmEdit.  There's no compelling reason for this.*

Generic Unit Tests
==================

**TBD**.

.. note:: Currently, all unit tests are classified as `Legacy Unit Tests`_.
    Tests will be separated `Generic Unit Tests`_ and `Legacy Unit Tests`_
    as part of design activities in a later sprint.

Data Mapping Class Definitions
==============================

The following tables show the legacy mapping from data elements to X12 message
loops and segments.

The following segment classes are defined in the legacy application.

-   `InstClaimDetails`_
-   `InstServiceLine`_
-   `Patient`_
-   `ProClaimDetails`_
-   `ProServiceLine`_
-   `Provider`_
-   `ServiceLineAdj`_
-   `Submitter`_
-   `Subscriber`_

InstClaimDetails
----------------

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Class                    |Attribute           |Segment   |Position  |Source File                     |Line |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"CLM"     |"1"       |clsInstClaimDetails.vb          |2182 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |PatAcct             |"CLM"     |"2"       |clsInstClaimDetails.vb          |2185 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |Amount              |"CLM"     |"3"       |clsInstClaimDetails.vb          |2188 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"CLM"     |"4"       |clsInstClaimDetails.vb          |2191 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"CLM"     |"5"       |clsInstClaimDetails.vb          |2192 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |ServiceLoc          |"CLM"     |"6"       |clsInstClaimDetails.vb          |2194 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |RespCode1           |"CLM"     |"7"       |clsInstClaimDetails.vb          |2197 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |MedAssign           |"CLM"     |"8"       |clsInstClaimDetails.vb          |2200 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |AssignBenInd        |"CLM"     |"9"       |clsInstClaimDetails.vb          |2203 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |Release             |"CLM"     |"10"      |clsInstClaimDetails.vb          |2206 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"CLM"     |"11"      |clsInstClaimDetails.vb          |2209 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |RelCauses           |"CLM"     |"12"      |clsInstClaimDetails.vb          |2211 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |ProgCode            |"CLM"     |"13"      |clsInstClaimDetails.vb          |2214 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"CLM"     |"14"      |clsInstClaimDetails.vb          |2217 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"CLM"     |"15"      |clsInstClaimDetails.vb          |2218 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"CLM"     |"16"      |clsInstClaimDetails.vb          |2219 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"CLM"     |"17"      |clsInstClaimDetails.vb          |2220 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"CLM"     |"18"      |clsInstClaimDetails.vb          |2221 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |RespCode2           |"CLM"     |"19"      |clsInstClaimDetails.vb          |2223 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"CLM"     |"20"      |clsInstClaimDetails.vb          |2226 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |DelayCode           |"CLM"     |"21"      |clsInstClaimDetails.vb          |2228 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"CL1"     |"1"       |clsInstClaimDetails.vb          |2260 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |AdmsType            |"CL1"     |"2"       |clsInstClaimDetails.vb          |2263 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |AdmsSrc             |"CL1"     |"3"       |clsInstClaimDetails.vb          |2266 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |DischStat           |"CL1"     |"4"       |clsInstClaimDetails.vb          |2269 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"QTY"     |"1"       |clsInstClaimDetails.vb          |2293 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |Qualifier           |"QTY"     |"2"       |clsInstClaimDetails.vb          |2296 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |CoveredDays         |"QTY*CA"  |"3"       |clsInstClaimDetails.vb          |2303 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |UOM                 |"QTY*CA"  |"4"       |clsInstClaimDetails.vb          |2306 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |NonCoveredDays      |"QTY*NA"  |"3"       |clsInstClaimDetails.vb          |2313 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |UOM                 |"QTY*NA"  |"4"       |clsInstClaimDetails.vb          |2316 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |CoInsuranceDays     |"QTY*CD"  |"3"       |clsInstClaimDetails.vb          |2323 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |UOM                 |"QTY*CD"  |"4"       |clsInstClaimDetails.vb          |2326 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |ReserveDays         |"QTY*LA"  |"3"       |clsInstClaimDetails.vb          |2333 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |UOM                 |"QTY*LA"  |"4"       |clsInstClaimDetails.vb          |2336 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"QTY*" ?  |"3"       |clsInstClaimDetails.vb          |2342 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |UOM                 |"QTY*" ?  |"4"       |clsInstClaimDetails.vb          |2345 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"DTP"     |"1"       |clsInstClaimDetails.vb          |2368 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |Qualifier           |"DTP"     |"2"       |clsInstClaimDetails.vb          |2371 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |Fmt                 |"DTP"     |"3"       |clsInstClaimDetails.vb          |2374 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |StmtDts             |"DTP*434" |"4"       |clsInstClaimDetails.vb          |2386 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |AdmsDt              |"DTP*435" |"4"       |clsInstClaimDetails.vb          |2392 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |DischHr             |"DTP*096" |"4"       |clsInstClaimDetails.vb          |2398 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"DTP*" ?  |"4"       |clsInstClaimDetails.vb          |2402 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"NTE*ADD" |"1"       |clsInstClaimDetails.vb          |2425 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |Ref                 |"NTE*ADD" |"2"       |clsInstClaimDetails.vb          |2428 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |BillNote            |"NTE*ADD" |"3"       |clsInstClaimDetails.vb          |2431 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"NTE*" ?  |"1"       |clsInstClaimDetails.vb          |2437 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |Ref &  *i*          |"NTE*" ?  |"2"       |clsInstClaimDetails.vb          |2440 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |ClaimNote & *i*     |"NTE*" ?  |"3"       |clsInstClaimDetails.vb          |2443 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"REF"     |"1"       |clsInstClaimDetails.vb          |2462 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |Qualifier           |"REF"     |"2"       |clsInstClaimDetails.vb          |2465 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |OrigClaimNo         |"REF*F8"  |"3"       |clsInstClaimDetails.vb          |2471 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |MedLRec             |"REF*EA"  |"3"       |clsInstClaimDetails.vb          |2477 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |MicroID             |"REF*D9"  |"3"       |clsInstClaimDetails.vb          |2483 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"REF*" ?  |"3"       |clsInstClaimDetails.vb          |2490 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"HI*DR"   |"1"       |clsInstClaimDetails.vb          |2520 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |DRG                 |"HI*DR"   |"2"       |clsInstClaimDetails.vb          |2523 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"HI*BR",  |"1"       |clsInstClaimDetails.vb          |2535 |
|                         |                    |"HI*BP"   |          |                                |     |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |PrinProcCode        |"HI*BR",  |"2"       |clsInstClaimDetails.vb          |2540 |
|                         |                    |"HI*BP"   |          |                                |     |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"HI*BF"   |"1"       |clsInstClaimDetails.vb          |2577 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |DiagCode & *i*      |"HI*BF"   |1-12      |clsInstClaimDetails.vb          |2586 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"HI*BG"   |"1"       |clsInstClaimDetails.vb          |2649 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |CondCode & *i*      |"HI*BG"   |1-12      |clsInstClaimDetails.vb          |2658 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"HI*BK"   |"1"       |clsInstClaimDetails.vb          |2704 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |PrinDiagCode        |"HI*BK"   |"2"       |clsInstClaimDetails.vb          |2707 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |AdmitDiagCd         |"HI*BK"   |"3"       |clsInstClaimDetails.vb          |2710 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"HI*BK"   |"4"       |clsInstClaimDetails.vb          |2713 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"HI*BQ",  |"1"       |clsInstClaimDetails.vb          |2749 |
|                         |                    |"HI*BO"   |          |                                |     |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |ProcCode & *i*      |"HI*BQ",  |1-12      |clsInstClaimDetails.vb          |2758 |
|                         |                    |"HI*BO"   |          |                                |     |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"HI*BH"   |"1"       |clsInstClaimDetails.vb          |2822 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |OccrCode & *i*      |"HI*BH"   |1-12      |clsInstClaimDetails.vb          |2831 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"HI*BE"   |"1"       |clsInstClaimDetails.vb          |2895 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |ValueCode & *i*     |"HI*BE"   |1-12      |clsInstClaimDetails.vb          |2904 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |SegmentID           |"PWK"     |"1"       |clsInstClaimDetails.vb          |2965 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |RptType & *i*       |"PWK"     |"2"       |clsInstClaimDetails.vb          |2968 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |TransCD &  *i*      |"PWK"     |"3"       |clsInstClaimDetails.vb          |2971 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"PWK"     |"4"       |clsInstClaimDetails.vb          |2974 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"PWK"     |"5"       |clsInstClaimDetails.vb          |2975 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |**NA**              |"PWK"     |"6"       |clsInstClaimDetails.vb          |2976 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |AttCtlQual &  *i*   |"PWK"     |"7"       |clsInstClaimDetails.vb          |2978 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstClaimDetails         |AttCtl &  *i*       |"PWK"     |"8"       |clsInstClaimDetails.vb          |2981 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

The ``Ref &`` *i* and ``ClaimNote &`` *i* fields are a case of multiple Segments
becoming a sequence of subsidiary objects. Each object, however, is just a
single Element, so this is not terribly complex.

The ``DiagCode &`` *i*, ``CondCode &`` *i*, ``ProcCode &`` *i*, ``OccrCode &``
*i* and ``ValueCode &`` *i* are a case of multiple Composite Elements within a
single Segment becoming a sequence of subsidiary objects. This is complex
because the Segment doesn't have a qualifier, but each Composite element has its
own individual qualifier.

Further, ``OccrCode &`` *i* is actually a complex object with it's own
attributes built out of the Composite's elements.

The various ``RptType &`` *i*, ``TransCD &`` *i*, ``AttCtlQual &`` *i*, ``AttCtl
&`` *i* elements form an sequence of "paperwork" objects within the claim
details. Each ``PWK`` segment becomes an instance of this "Report" (or "Paperwork")
object.

InstServiceLine
---------------

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Class                    |Attribute           |Segment   |Position  |Source File                     |Line |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |SegmentID           |"LX"      |"1"       |clsInstServiceLine.vb           |360  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |SrvLNo              |"LX"      |"2"       |clsInstServiceLine.vb           |363  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |SegmentID           |"DTP"     |"1"       |clsInstServiceLine.vb           |387  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |Qualifier           |"DTP"     |"2"       |clsInstServiceLine.vb           |390  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |Format              |"DTP"     |"3"       |clsInstServiceLine.vb           |393  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |SrvDT               |"DTP*472" |"4"       |clsInstServiceLine.vb           |401  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |**NA**              |"DTP*" ?  |"4"       |clsInstServiceLine.vb           |407  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |SegmentID           |"SV2"     |"1"       |clsInstServiceLine.vb           |438  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |RevenueCode         |"SV2"     |"2"       |clsInstServiceLine.vb           |441  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |ProcID              |"SV2"     |"3"       |clsInstServiceLine.vb           |444  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |Amt                 |"SV2"     |"4"       |clsInstServiceLine.vb           |447  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |UnitsQual           |"SV2"     |"5"       |clsInstServiceLine.vb           |450  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |Units               |"SV2"     |"6"       |clsInstServiceLine.vb           |453  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |UnitRate            |"SV2"     |"7"       |clsInstServiceLine.vb           |456  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |AmtNotCovered       |"SV2"     |"8"       |clsInstServiceLine.vb           |459  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |SegmentID           |"SV5"     |"1"       |clsInstServiceLine.vb           |495  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |DMECode             |"SV5"     |"2"       |clsInstServiceLine.vb           |498  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |Qualifier           |"SV5"     |"3"       |clsInstServiceLine.vb           |501  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |Amt1                |"SV5"     |"4"       |clsInstServiceLine.vb           |504  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |Amt2                |"SV5"     |"5"       |clsInstServiceLine.vb           |507  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |Amt3                |"SV5"     |"6"       |clsInstServiceLine.vb           |510  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|InstServiceLine          |Amt4                |"SV5"     |"7"       |clsInstServiceLine.vb           |513  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

Patient
-------

The patient loop, 2000C, starts with Segmemnt ``"HL*23"``.

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Class                    |Attribute           |Segment   |Position  |Source File                     |Line |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |SegmentID           |"NM1"     |"1"       |clsPatient.vb                   |261  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Qualifier           |"NM1"     |"2"       |clsPatient.vb                   |264  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |EntityType          |"NM1"     |"3"       |clsPatient.vb                   |267  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Last                |"NM1"     |"4"       |clsPatient.vb                   |270  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |First               |"NM1"     |"5"       |clsPatient.vb                   |273  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Mid                 |"NM1"     |"6"       |clsPatient.vb                   |276  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |**NA**              |"NM1"     |"7"       |clsPatient.vb                   |279  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Suffix              |"NM1"     |"8"       |clsPatient.vb                   |281  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |IDQual              |"NM1"     |"9"       |clsPatient.vb                   |284  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |ID                  |"NM1"     |"10"      |clsPatient.vb                   |287  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |SegmentID           |"N3"      |"1"       |clsPatient.vb                   |313  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Addr1               |"N3"      |"2"       |clsPatient.vb                   |316  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Addr2               |"N3"      |"3"       |clsPatient.vb                   |319  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |SegmentID           |"N4"      |"1"       |clsPatient.vb                   |343  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |City                |"N4"      |"2"       |clsPatient.vb                   |346  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |State               |"N4"      |"3"       |clsPatient.vb                   |349  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Zip                 |"N4"      |"4"       |clsPatient.vb                   |352  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Country             |"N4"      |"5"       |clsPatient.vb                   |355  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |SegmentID           |"DMG"     |"1"       |clsPatient.vb                   |378  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Qualifier           |"DMG"     |"2"       |clsPatient.vb                   |381  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |DOB                 |"DMG"     |"3"       |clsPatient.vb                   |384  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Sex                 |"DMG"     |"4"       |clsPatient.vb                   |387  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |SegmentID           |"REF"     |"1"       |clsPatient.vb                   |521  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Qualifier           |"REF"     |"2"       |clsPatient.vb                   |524  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |SSN                 |"REF*SY"  |"3"       |clsPatient.vb                   |532  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |**NA**              |"REF*" ?  |"3"       |clsPatient.vb                   |538  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

Inpatient, Outpatient
~~~~~~~~~~~~~~~~~~~~~

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |SegmentID           |"PAT"     |"1"       |clsPatient.vb                   |427  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Rel                 |"PAT"     |"2"       |clsPatient.vb                   |430  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |**NA**              |"PAT"     |"3"       |clsPatient.vb                   |433  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |**NA**              |"PAT"     |"4"       |clsPatient.vb                   |434  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |**NA**              |"PAT"     |"5"       |clsPatient.vb                   |435  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |**NA**              |"PAT"     |"6"       |clsPatient.vb                   |436  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |**NA**              |"PAT"     |"7"       |clsPatient.vb                   |437  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |MeasCode            |"PAT"     |"8"       |clsPatient.vb                   |439  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Weight              |"PAT"     |"9"       |clsPatient.vb                   |442  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Resp                |"PAT"     |"10"      |clsPatient.vb                   |445  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

Professional
~~~~~~~~~~~~

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |SegmentID           |"PAT"     |"1"       |clsPatient.vb                   |477  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Rel                 |"PAT"     |"2"       |clsPatient.vb                   |480  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |**NA**              |"PAT"     |"3"       |clsPatient.vb                   |483  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |**NA**              |"PAT"     |"4"       |clsPatient.vb                   |484  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |**NA**              |"PAT"     |"5"       |clsPatient.vb                   |485  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |DateFormat          |"PAT"     |"6"       |clsPatient.vb                   |487  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |DOD                 |"PAT"     |"7"       |clsPatient.vb                   |490  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |MeasCode            |"PAT"     |"8"       |clsPatient.vb                   |493  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Weight              |"PAT"     |"9"       |clsPatient.vb                   |496  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Patient                  |Preg                |"PAT"     |"10"      |clsPatient.vb                   |499  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

ProClaimDetails
---------------

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Class                    |Attribute           |Segment   |Position  |Source File                     |Line |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |SegmentID           |"DTP"     |"1"       |clsProClaimDetails.vb           |799  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Qualifier           |"DTP"     |"2"       |clsProClaimDetails.vb           |802  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Fmt                 |"DTP"     |"3"       |clsProClaimDetails.vb           |805  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Intit               |"DTP*454" |"4"       |clsProClaimDetails.vb           |815  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Accident            |"DTP*439" |"4"       |clsProClaimDetails.vb           |821  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Onset               |"DTP*431" |"4"       |clsProClaimDetails.vb           |827  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |LMP                 |"DTP*484" |"4"       |clsProClaimDetails.vb           |833  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Presc               |"DTP*471" |"4"       |clsProClaimDetails.vb           |839  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"DTP*" ?  |"4"       |clsProClaimDetails.vb           |843  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |SegmentID           |"CR1"     |"1"       |clsProClaimDetails.vb           |877  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |MeasCode            |"CR1"     |"2"       |clsProClaimDetails.vb           |880  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Weight              |"CR1"     |"3"       |clsProClaimDetails.vb           |883  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |AmbTransCode        |"CR1"     |"4"       |clsProClaimDetails.vb           |886  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |AmbTransReason      |"CR1"     |"5"       |clsProClaimDetails.vb           |889  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |AmbTransQual        |"CR1"     |"6"       |clsProClaimDetails.vb           |892  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |AmbTransQty         |"CR1"     |"7"       |clsProClaimDetails.vb           |895  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"CR1"     |"8"       |clsProClaimDetails.vb           |898  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"CR1"     |"9"       |clsProClaimDetails.vb           |899  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |AmbDescript         |"CR1"     |"10"      |clsProClaimDetails.vb           |901  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |AmbDescript2        |"CR1"     |"11"      |clsProClaimDetails.vb           |904  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |SegmentID           |"NTE"     |"1"       |clsProClaimDetails.vb           |930  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Ref                 |"NTE"     |"2"       |clsProClaimDetails.vb           |933  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Note                |"NTE"     |"3"       |clsProClaimDetails.vb           |936  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |SegmentID           |"HI"      |"1"       |clsProClaimDetails.vb           |971  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |DiagCode1           |"HI"      |"2"       |clsProClaimDetails.vb           |974  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |DiagCode2           |"HI"      |"3"       |clsProClaimDetails.vb           |977  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |DiagCode3           |"HI"      |"4"       |clsProClaimDetails.vb           |980  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |DiagCode4           |"HI"      |"5"       |clsProClaimDetails.vb           |983  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |DiagCode5           |"HI"      |"6"       |clsProClaimDetails.vb           |986  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |DiagCode6           |"HI"      |"7"       |clsProClaimDetails.vb           |989  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |DiagCode7           |"HI"      |"8"       |clsProClaimDetails.vb           |992  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |DiagCode8           |"HI"      |"9"       |clsProClaimDetails.vb           |995  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |SegmentID           |"CLM"     |"1"       |clsProClaimDetails.vb           |1061 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |PatAcct             |"CLM"     |"2"       |clsProClaimDetails.vb           |1064 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Amount              |"CLM"     |"3"       |clsProClaimDetails.vb           |1067 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"CLM"     |"4"       |clsProClaimDetails.vb           |1070 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"CLM"     |"5"       |clsProClaimDetails.vb           |1071 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |ServiceLoc          |"CLM"     |"6"       |clsProClaimDetails.vb           |1073 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |RespCode1           |"CLM"     |"7"       |clsProClaimDetails.vb           |1076 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |MedAssign           |"CLM"     |"8"       |clsProClaimDetails.vb           |1079 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |AssignBenInd        |"CLM"     |"9"       |clsProClaimDetails.vb           |1082 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Release             |"CLM"     |"10"      |clsProClaimDetails.vb           |1085 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Signature           |"CLM"     |"11"      |clsProClaimDetails.vb           |1088 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |RelCauses           |"CLM"     |"12"      |clsProClaimDetails.vb           |1091 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |ProgCode            |"CLM"     |"13"      |clsProClaimDetails.vb           |1094 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"CLM"     |"14"      |clsProClaimDetails.vb           |1097 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"CLM"     |"15"      |clsProClaimDetails.vb           |1098 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"CLM"     |"16"      |clsProClaimDetails.vb           |1099 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |ProvAgree           |"CLM"     |"17"      |clsProClaimDetails.vb           |1101 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"CLM"     |"18"      |clsProClaimDetails.vb           |1104 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"CLM"     |"19"      |clsProClaimDetails.vb           |1105 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"CLM"     |"20"      |clsProClaimDetails.vb           |1106 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |DelayCode           |"CLM"     |"21"      |clsProClaimDetails.vb           |1108 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |SegmentID           |"CR7"     |"1"       |clsProClaimDetails.vb           |1137 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |HomeHealthCd        |"CR7"     |"2"       |clsProClaimDetails.vb           |1140 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |VisitsRend          |"CR7"     |"3"       |clsProClaimDetails.vb           |1143 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |VisitsProj          |"CR7"     |"4"       |clsProClaimDetails.vb           |1146 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |SegmentID           |"CRC"     |"1"       |clsProClaimDetails.vb           |1175 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |CodeCat             |"CRC"     |"2"       |clsProClaimDetails.vb           |1178 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Cond1               |"CRC"     |"3"       |clsProClaimDetails.vb           |1181 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Cond2               |"CRC"     |"4"       |clsProClaimDetails.vb           |1184 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Cond3               |"CRC"     |"5"       |clsProClaimDetails.vb           |1187 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Cond4               |"CRC"     |"6"       |clsProClaimDetails.vb           |1190 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Cond5               |"CRC"     |"7"       |clsProClaimDetails.vb           |1193 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |SegmentID           |"REF"     |"1"       |clsProClaimDetails.vb           |1216 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |Qualifier           |"REF"     |"2"       |clsProClaimDetails.vb           |1219 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |OrigClaimNo         |"REF*F8"  |"3"       |clsProClaimDetails.vb           |1227 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |ReflNum             |"REF*9F"  |"3"       |clsProClaimDetails.vb           |1233 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |PreAuth             |"REF*G1"  |"3"       |clsProClaimDetails.vb           |1239 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |MedLRec             |"REF*EA"  |"3"       |clsProClaimDetails.vb           |1245 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |MicroID             |"REF*D9"  |"3"       |clsProClaimDetails.vb           |1251 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"REF*" ?  |"3"       |clsProClaimDetails.vb           |1259 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |SegmentID           |"PWK"     |"1"       |clsProClaimDetails.vb           |1280 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |RptType & *i*       |"PWK"     |"2"       |clsProClaimDetails.vb           |1283 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |TransCD & *i*       |"PWK"     |"3"       |clsProClaimDetails.vb           |1286 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"PWK"     |"4"       |clsProClaimDetails.vb           |1289 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"PWK"     |"5"       |clsProClaimDetails.vb           |1290 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |**NA**              |"PWK"     |"6"       |clsProClaimDetails.vb           |1291 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |AttCtlQual &  *i*   |"PWK"     |"7"       |clsProClaimDetails.vb           |1293 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProClaimDetails          |AttCtl &  *i*       |"PWK"     |"8"       |clsProClaimDetails.vb           |1296 |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

ProServiceLine
--------------

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Class                    |Attribute           |Segment   |Position  |Source File                     |Line |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |SegmentID           |"LX"      |"1"       |clsProServiceLine.vb            |388  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |SrvLNo              |"LX"      |"2"       |clsProServiceLine.vb            |391  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |SegmentID           |"DTP"     |"1"       |clsProServiceLine.vb            |415  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |Qualifier           |"DTP"     |"2"       |clsProServiceLine.vb            |418  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |Format              |"DTP"     |"3"       |clsProServiceLine.vb            |421  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |SrvDT               |"DTP*472" |"4"       |clsProServiceLine.vb            |429  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |**NA**              |"DTP*" ?  |"4"       |clsProServiceLine.vb            |435  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |SegmentID           |"SV1"     |"1"       |clsProServiceLine.vb            |477  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |SrvID               |"SV1"     |"2"       |clsProServiceLine.vb            |480  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |Amt                 |"SV1"     |"3"       |clsProServiceLine.vb            |483  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |UnitsQual           |"SV1"     |"4"       |clsProServiceLine.vb            |486  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |Units               |"SV1"     |"5"       |clsProServiceLine.vb            |489  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |FacCode             |"SV1"     |"6"       |clsProServiceLine.vb            |492  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |**NA**              |"SV1"     |"7"       |clsProServiceLine.vb            |495  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |DiagCode            |"SV1"     |"8"       |clsProServiceLine.vb            |497  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |**NA**              |"SV1"     |"9"       |clsProServiceLine.vb            |500  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |RespCode1           |"SV1"     |"10"      |clsProServiceLine.vb            |502  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |**NA**              |"SV1"     |"11"      |clsProServiceLine.vb            |505  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |RespCode2           |"SV1"     |"12"      |clsProServiceLine.vb            |507  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |RespCode3           |"SV1"     |"13"      |clsProServiceLine.vb            |510  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |**NA**              |"SV1"     |"14"      |clsProServiceLine.vb            |513  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |**NA**              |"SV1"     |"15"      |clsProServiceLine.vb            |514  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |CoPay               |"SV1"     |"16"      |clsProServiceLine.vb            |516  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |SegmentID           |"SV5"     |"1"       |clsProServiceLine.vb            |551  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |DMECode             |"SV5"     |"2"       |clsProServiceLine.vb            |554  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |Qualifier           |"SV5"     |"3"       |clsProServiceLine.vb            |557  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |Amt1                |"SV5"     |"4"       |clsProServiceLine.vb            |560  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |Amt2                |"SV5"     |"5"       |clsProServiceLine.vb            |563  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |Amt3                |"SV5"     |"6"       |clsProServiceLine.vb            |566  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ProServiceLine           |Amt4                |"SV5"     |"7"       |clsProServiceLine.vb            |569  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

Provider
--------

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Class                    |Attribute           |Segment   |Position  |Source File                     |Line |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |SegmentID           |"N3"      |"1"       |clsProvider.vb                  |415  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Addr1               |"N3"      |"2"       |clsProvider.vb                  |418  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Addr2               |"N3"      |"3"       |clsProvider.vb                  |421  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |SegmentID           |"N4"      |"1"       |clsProvider.vb                  |445  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |City                |"N4"      |"2"       |clsProvider.vb                  |448  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |State               |"N4"      |"3"       |clsProvider.vb                  |451  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Zip                 |"N4"      |"4"       |clsProvider.vb                  |454  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Country             |"N4"      |"5"       |clsProvider.vb                  |457  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |SegmentID           |"NM1"     |"1"       |clsProvider.vb                  |488  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Qualifier           |"NM1"     |"2"       |clsProvider.vb                  |491  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |EntityType          |"NM1"     |"3"       |clsProvider.vb                  |494  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Last                |"NM1"     |"4"       |clsProvider.vb                  |497  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |First               |"NM1"     |"5"       |clsProvider.vb                  |500  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Midl                |"NM1"     |"6"       |clsProvider.vb                  |503  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |NM106               |"NM1"     |"7"       |clsProvider.vb                  |506  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Suffix              |"NM1"     |"8"       |clsProvider.vb                  |509  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |IDQual              |"NM1"     |"9"       |clsProvider.vb                  |512  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |TaxID               |"NM1"     |"10"      |clsProvider.vb                  |523  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |NPI                 |"NM1"     |"10"      |clsProvider.vb                  |531  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |NM109               |"NM1"     |"10"      |clsProvider.vb                  |538  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |SegmentID           |"PER"     |"1"       |clsProvider.vb                  |564  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |ContactFunct        |"PER"     |"2"       |clsProvider.vb                  |567  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Name                |"PER"     |"3"       |clsProvider.vb                  |570  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |CommQual1           |"PER"     |"4"       |clsProvider.vb                  |573  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |CommQual2           |"PER"     |"6"       |clsProvider.vb                  |576  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |CommQual3           |"PER"     |"8"       |clsProvider.vb                  |579  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Email               |"PER**EM" |"5"       |clsProvider.vb                  |585  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |FaxNo               |"PER**FX" |"5"       |clsProvider.vb                  |592  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |PhoneNo             |"PER**TE" |"5"       |clsProvider.vb                  |599  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |**NA**              |"PER**" ? |"5"       |clsProvider.vb                  |606  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Email               |"PER***EM" "7"       |clsProvider.vb                  |614  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |FaxNo               |"PER***FX" "7"       |clsProvider.vb                  |621  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |PhoneNo             |"PER***TE" "7"       |clsProvider.vb                  |628  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |**NA**              |"PER***" ?|"7"       |clsProvider.vb                  |635  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Email               |PER****EM |"9"       |clsProvider.vb                  |643  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |FaxNo               |PER****FX |"9"       |clsProvider.vb                  |650  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |PhoneNo             |PER****TE |"9"       |clsProvider.vb                  |657  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |**NA**              |PER**** ? |"9"       |clsProvider.vb                  |664  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |SegmentID           |"PRV"     |"1"       |clsProvider.vb                  |683  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |ProvCode            |"PRV"     |"2"       |clsProvider.vb                  |686  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Qual                |"PRV"     |"3"       |clsProvider.vb                  |689  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |TaxonomyCD          |"PRV"     |"4"       |clsProvider.vb                  |692  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |SegmentID           |"REF"     |"1"       |clsProvider.vb                  |713  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |Qualifier           |"REF"     |"2"       |clsProvider.vb                  |716  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |BCID                |"REF*1A"  |"3"       |clsProvider.vb                  |721  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |BSID                |"REF*1B"  |"3"       |clsProvider.vb                  |728  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |MedID               |"REF*1C"  |"3"       |clsProvider.vb                  |735  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |UPIN                |"REF*1G"  |"3"       |clsProvider.vb                  |742  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |CommID              |"REF*G2"  |"3"       |clsProvider.vb                  |749  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |TaxID               |"REF*SY"  |"3"       |clsProvider.vb                  |760  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |TaxID               |"REF*EI"  |"3"       |clsProvider.vb                  |776  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |ITSSpec             |"REF*N5"  |"3"       |clsProvider.vb                  |788  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |LegacyID            |"REF*X5"  |"3"       |clsProvider.vb                  |795  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Provider                 |REF02               |"REF*" ?  |"3"       |clsProvider.vb                  |804  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

Email, Fax and Telephone appear complex.  However, there are 6 elements in pairs.
Element pairs 3, 4 are a qualifier and a number, as are 5, 6 and 7, 8.  If the qualifier
is "EM" then then number is an email address.  If the qualifier is "FX", then the
number is a fax number.  If the qualifier is "TE", then the number is a telephone number.

TaxID has some subtleties::

        'NOTE: If SY and EI are both present on a claim, but a TaxID in NM109 is not,
        '      and the user changes the TaxID, both the SY and EI values will be
        '      changed, per Jennifer Delmont.

        'EI should take precedence over SY, but you still don't want to override the
        'NM109 TaxID.

ServiceLineAdj
--------------

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Class                    |Attribute           |Segment   |Position  |Source File                     |Line |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |SegmentID           |"SVD"     |"1"       |clsServiceLineAdj.vb            |128  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |IDCode              |"SVD"     |"2"       |clsServiceLineAdj.vb            |131  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |Amt                 |"SVD"     |"3"       |clsServiceLineAdj.vb            |134  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |ProcID              |"SVD"     |"4"       |clsServiceLineAdj.vb            |137  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |SvcID               |"SVD"     |"5"       |clsServiceLineAdj.vb            |140  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |Qty                 |"SVD"     |"6"       |clsServiceLineAdj.vb            |143  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |AssNo               |"SVD"     |"7"       |clsServiceLineAdj.vb            |146  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |SegmentID           |"DTP"     |"1"       |clsServiceLineAdj.vb            |170  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |Qualifier           |"DTP"     |"2"       |clsServiceLineAdj.vb            |173  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |Format              |"DTP"     |"3"       |clsServiceLineAdj.vb            |176  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |SrvDT               |"DTP*579" |"4"       |clsServiceLineAdj.vb            |184  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|ServiceLineAdj           |**NA**              |"DTP*" ?  |"4"       |clsServiceLineAdj.vb            |191  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

Submitter
---------

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Class                    |Attribute           |Segment   |Position  |Source File                     |Line |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Submitter                |SegmentID           |"NM1"     |"1"       |clsSubmitter.vb                 |198  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Submitter                |Qualifier           |"NM1"     |"2"       |clsSubmitter.vb                 |201  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Submitter                |EntityType          |"NM1"     |"3"       |clsSubmitter.vb                 |204  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Submitter                |Last                |"NM1"     |"4"       |clsSubmitter.vb                 |207  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Submitter                |First               |"NM1"     |"5"       |clsSubmitter.vb                 |210  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Submitter                |Mid                 |"NM1"     |"6"       |clsSubmitter.vb                 |213  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Submitter                |**NA**              |"NM1"     |"7"       |clsSubmitter.vb                 |216  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Submitter                |Suffix              |"NM1"     |"8"       |clsSubmitter.vb                 |218  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Submitter                |IDQual              |"NM1"     |"9"       |clsSubmitter.vb                 |221  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Submitter                |ID                  |"NM1"     |"10"      |clsSubmitter.vb                 |224  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

Subscriber
----------

+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Class                    |Attribute           |Segment   |Position  |Source File                     |Line |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |SegmentID           |"NM1"     |"1"       |clsSubscriber.vb                |271  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Qualifier           |"NM1"     |"2"       |clsSubscriber.vb                |274  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |EntityType          |"NM1"     |"3"       |clsSubscriber.vb                |277  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Last                |"NM1"     |"4"       |clsSubscriber.vb                |280  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |First               |"NM1"     |"5"       |clsSubscriber.vb                |283  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Mid                 |"NM1"     |"6"       |clsSubscriber.vb                |286  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |**NA**              |"NM1"     |"7"       |clsSubscriber.vb                |289  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Suffix              |"NM1"     |"8"       |clsSubscriber.vb                |291  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |IDQual              |"NM1"     |"9"       |clsSubscriber.vb                |294  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |ID                  |"NM1"     |"10"      |clsSubscriber.vb                |297  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |SegmentID           |"SBR"     |"1"       |clsSubscriber.vb                |335  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |PayerResp           |"SBR"     |"2"       |clsSubscriber.vb                |338  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |RelCode             |"SBR"     |"3"       |clsSubscriber.vb                |341  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Reference           |"SBR"     |"4"       |clsSubscriber.vb                |344  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Name                |"SBR"     |"5"       |clsSubscriber.vb                |347  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |InsType             |"SBR"     |"6"       |clsSubscriber.vb                |350  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |**NA**              |"SBR"     |"7"       |clsSubscriber.vb                |353  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |**NA**              |"SBR"     |"8"       |clsSubscriber.vb                |354  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |**NA**              |"SBR"     |"9"       |clsSubscriber.vb                |355  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |ClaimCode           |"SBR"     |"10"      |clsSubscriber.vb                |357  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |SegmentID           |"N3"      |"1"       |clsSubscriber.vb                |381  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Addr1               |"N3"      |"2"       |clsSubscriber.vb                |384  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Addr2               |"N3"      |"3"       |clsSubscriber.vb                |387  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |SegmentID           |"N4"      |"1"       |clsSubscriber.vb                |416  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |City                |"N4"      |"2"       |clsSubscriber.vb                |419  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |State               |"N4"      |"3"       |clsSubscriber.vb                |422  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Zip                 |"N4"      |"4"       |clsSubscriber.vb                |425  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Country             |"N4"      |"5"       |clsSubscriber.vb                |428  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |SegmentID           |"PAT"     |"1"       |clsSubscriber.vb                |464  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |**NA**              |"PAT"     |"2"       |clsSubscriber.vb                |467  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |**NA**              |"PAT"     |"3"       |clsSubscriber.vb                |468  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |**NA**              |"PAT"     |"4"       |clsSubscriber.vb                |469  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |**NA**              |"PAT"     |"5"       |clsSubscriber.vb                |470  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |DateFormat          |"PAT"     |"6"       |clsSubscriber.vb                |472  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |DOD                 |"PAT"     |"7"       |clsSubscriber.vb                |475  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |MeasCode            |"PAT"     |"8"       |clsSubscriber.vb                |478  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Weight              |"PAT"     |"9"       |clsSubscriber.vb                |481  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Preg                |"PAT"     |"10"      |clsSubscriber.vb                |484  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |SegmentID           |"DMG"     |"1"       |clsSubscriber.vb                |511  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Qualifier           |"DMG"     |"2"       |clsSubscriber.vb                |514  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |DOB                 |"DMG"     |"3"       |clsSubscriber.vb                |517  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Gender              |"DMG"     |"4"       |clsSubscriber.vb                |520  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |SegmentID           |"REF"     |"1"       |clsSubscriber.vb                |543  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |Qualifier           |"REF"     |"2"       |clsSubscriber.vb                |546  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |SSN                 |"REF*SY"  |"3"       |clsSubscriber.vb                |554  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+
|Subscriber               |**NA**              |"REF*" ?  |"3"       |clsSubscriber.vb                |560  |
+-------------------------+--------------------+----------+----------+--------------------------------+-----+

Unified Claim Modification
^^^^^^^^^^^^^^^^^^^^^^^^^^

This section is an attempt to provide a "unified" overview of all of the various
claim modifications that can occur.

Claim Modification Overview
===========================

Automod can modify any combination of the following claim attributes.  Each
of these is on a distinct, identifiable segment.

+----------------------+---------------+----------+---------------------------------------------------+
| Data Mapping         | Loop and      |          |                                                   |
|                      | Starting      | Automod  | Notes                                             |
| Class Definition     | Segment ID    | Option   |                                                   |
+======================+===============+==========+===================================================+
| Patient              | 2000C         | Patient  | Based on a supplied list of Members/Subscribers.  |
|                      | ``HL*23``     |          | This can be a SQL query, results of a web         |
|                      |               |          | service or an uploaded spreadsheet.               |
+----------------------+---------------+----------+---------------------------------------------------+
| Subscriber           | 2000B         |Subscriber| Set to match the Patient.  Either the same        |
|                      | ``HL*22``     |          | subscriber or the subscriber for the member.      |
+----------------------+---------------+----------+---------------------------------------------------+
| BillingProvider      | 2000A         | Provider | Sets BlueCross, BlueShield and Commercial ID      |
|                      | ``HL*20``     |          | This is based on a supplied list of Providers.    |
+----------------------+---------------+----------+---------------------------------------------------+
| RenderingProvider    | 2310B, 2330E, | Provider | Sets BlueCross, BlueShield and Commercial ID      |
|                      | 2420A, 2310B  |          |                                                   |
|                      | ``NM1*82``    |          | This is based on a supplied list of Providers.    |
+----------------------+---------------+----------+---------------------------------------------------+
| InstClaimDetails     | 2300          |          |                                                   |
|                      | ``CLM`` plus  | Patient  | Prefix is the first four positions                |
| ProClaimDetails      | transaction   | Account  | A customer-specific coded value of "QUAL",        |
|                      | type          | Prefix   | "OCMA" or "OCMB".                                 |
+----------------------+---------------+----------+---------------------------------------------------+
| InstClaimDetails     | 2300          |          |                                                   |
|                      | ``CLM`` plus  | Patient  | Customer-specific                                 |
| ProClaimDetails      | transaction   | Account  | coded value: Trouble Ticket (TT) or               |
|                      | type          |          | Change Request (CR).                              |
+----------------------+---------------+----------+---------------------------------------------------+
| ProServiceLine       | 2400          | Date Of  | This is on the claim as well as each line item of |
| InstServiceLine      | ``LX``        | Service  | the claim.   The relationships among dates and    |
|                      |               |          | date ranges are maintained.                       |
+----------------------+---------------+----------+---------------------------------------------------+
| ProClaimDetails      | 2300          | Place of | At the Claim or Line level.                       |
| ProServiceLine       | ``CLM``       | Service  | Based on a supplied list of values.               |
+----------------------+---------------+----------+---------------------------------------------------+
| InstClaimDetails     | 2300          | Procedure| Procedure Code at the Claim level.                |
|                      | ``CLM``       | Code     | Based on a supplied list of values.               |
+----------------------+---------------+----------+---------------------------------------------------+
| ProServiceLine       | 2400          | Procedure| Procedure Code at the Line level.                 |
|                      | ``LX``        | Code     | Based on a supplied list of values.               |
+----------------------+---------------+----------+---------------------------------------------------+
| ProServiceLine       | ``LX``        | Diagnosis| At the Claim (Pro) or Line (Inst) level.          |
| InstClaimDetails     | ``CLM``       | Codes    | Based on a supplied list of values.               |
+----------------------+---------------+----------+---------------------------------------------------+
| ProServiceLine       | 2400          | Modifiers| At the line level.                                |
|                      | ``LX``        |          | Based on a supplied list of values.               |
+----------------------+---------------+----------+---------------------------------------------------+
| PayToProvider        | 2010AB        |          |                                                   |
|                      | ``NM1*87``    |          | *Recognized and instantiated but not modified.*   |
+----------------------+---------------+          |                                                   |
| ReferringProvider    | 2310A, 2330D, |          |                                                   |
|                      | 2420F         |          |                                                   |
|                      | ``NM1*DN``    |          |                                                   |
+----------------------+---------------+          |                                                   |
| ServiceProvider      | 2310D, 2330G, |          |                                                   |
|                      | 2420C         |          |                                                   |
|                      | ``NM1*FA``    |          |                                                   |
+----------------------+---------------+          |                                                   |
| AttendingPhysician-  | 2310A, 2330D, |          |                                                   |
| Provider             | 2420A         |          |                                                   |
|                      | ``NM1*71``    |          |                                                   |
+----------------------+---------------+          |                                                   |
| OperatingPhysician-  | 2310B, 2330E, |          |                                                   |
| Provider             | 2420B,        |          |                                                   |
|                      | ``NM1*72``    |          |                                                   |
+----------------------+---------------+----------+---------------------------------------------------+
| Submitter            | 1000A         |          |                                                   |
|                      | ``NM1*41``    |          | *Recognized and instantiated but not modified.*   |
+----------------------+---------------+----------+---------------------------------------------------+
| ServiceLineAdj       | 2430          |          |                                                   |
|                      | ``SVD``       |          | *Recognized but not instantiated.*                |
+----------------------+---------------+----------+---------------------------------------------------+

Note that Patient (and Subscriber) and Provider can be given as SQL query result
sets, uploaded spreadsheets, or as the result of a web services request. See
below under `Legacy Concerns`_ for more information on this issue.

NPI Provider is somewhat different than other automod processing. In this case,
message segments can be added or changed. This is also based on supplied
Provider data. NPI Provider information updates (or creates) a number of
segments scattered throughout the claim.

-   ``PRV`` segment in RenderingProvider or BillingProvider loops.

-   ``NM1`` segment in BillingProvider as well as RenderingProvider loops.

-   ``N3`` segment in BillingProvider.

-   ``N4`` segment in BillingProvider.

-   ``REF`` segment in BillingProvider as well as RenderingProvider loops.

Legacy Concerns
===============

Elements which must be removed from the legacy implementation:

-   The Member query, used for the Eligibility Modification, must be removed
    from Tiger, since it can vary by Customer.  A separate Member
    service is required.  This can have several sources for Members, Groups, Eligibility,
    Plans and Benefits.

-   The NPI query, used for NPI Provider Modification, must be removed
    from Tiger, since it can vary by Customer.  A separate NPI service
    is required.  This can have several sources for Providers.

There are several alternative implementations for the above. In all cases, a
customer-site application must act as orchestration between the customer's
source data and Tiger.

-   **DB Query**.  This requires the most extensive customer-site development.
    In the long run, these queries are an inevitable part of the implementation --
    without a DB query providers and members can't easily be passed to Tiger.

-   **WS Request**.  In some cases, a customer will have an in-house Web Service
    to provide member and provider information to Tiger.  This would contain
    the necessary DB query.

-   **Spreadsheet Upload**.  While this is handy, it begs of question of where
    the members and providers originated.  For the "New Functionality" testing,
    this can be a useful feature.  For Problem Resolution or Regression Testing,
    this isn't the best approach, since it requires users to maintain the
    spreadsheet in a pristine form.
